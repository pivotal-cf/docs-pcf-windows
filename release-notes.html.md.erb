---
title: VMware Tanzu Application Service for Windows v4.0 Release Notes
owner: Garden Windows
---

This topic contains release notes for <%= vars.windows_runtime_full %> (<%= vars.windows_runtime_abbr %>) <%= vars.v_major_version %>.

Because VMware uses the Percona Distribution for MySQL, expect a time lag between Oracle releasing a MySQL patch and VMware releasing
<%= vars.windows_runtime_abbr %> containing that patch.

Before you install the tile, review the [Windows Stemcell Compatibility Matrix](stemcells.html#compatibility).

<hr>

## <a id='releases'></a> Releases

### <a id='4.0.2'></a> 4.0.2

**Release Date:** 05/25/2023


<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>windows2019 stemcell</td><td>2019.61</td></tr>
    <tr><td>count-cores-indicator</td><td>2.0.0</td></tr>
    <tr><td>diego</td><td>2.76.0</td></tr>
    <tr><td>envoy-nginx</td><td>0.15.0</td></tr>
    <tr><td>garden-runc</td><td>1.29.0</td></tr>
    <tr><td>hwc-offline-buildpack</td><td>3.1.30</td></tr>
    <tr><td>loggregator-agent</td><td>7.2.1</td></tr>
    <tr><td>metrics-discovery</td><td>3.2.9</td></tr>
    <tr><td>smoke-tests</td><td>4.8.2</td></tr>
    <tr><td>winc</td><td>2.11.1</td></tr>
    <tr><td>windows-syslog</td><td>1.1.14</td></tr>
    <tr><td>windows-utilities</td><td>0.17.0</td></tr>
  </tbody>
</table>



### <a id='4.0.1'></a> 4.0.1+LTS-T

**Release Date:** 05/17/2023

* **[Bug Fix]** Resolve Issue where Garden failed during BOSH/OpsMan deploys due to healthcheck
* Bump count-cores-indicator to version `2.0.0`
* Bump diego to version `2.76.0`
* Bump garden-runc to version `1.29.0`
* Bump hwc-offline-buildpack to version `3.1.30`
* Bump loggregator-agent to version `7.2.1`
* Bump metrics-discovery to version `3.2.9`
* Bump winc to version `2.11.1`
* Bump windows-syslog to version `1.1.14`
* Bump windowsfs-release to version `2.52.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
      <th>Release Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>windows2019 stemcell</td><td>2019.60</td><td></td></tr>
    <tr><td>count-cores-indicator</td><td>2.0.0</td><td></td></tr>
    <tr><td>diego</td><td>2.76.0</td>
      <td>
        <details>
          <summary>v2.76.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  - Bump to Go 1.20.4
  - Bump dependencies
  ## Bosh Job Spec changes:
  ```diff
  diff --git a/jobs/auctioneer/spec b/jobs/auctioneer/spec
  index ae685ceb9..1fac48936 100644
  --- a/jobs/auctioneer/spec
  +++ b/jobs/auctioneer/spec
  @@ -88,6 +88,12 @@ properties:
  diego.auctioneer.locket.api_location:
  description: "Hostname and port of the Locket server. When set, the auctioneer attempts to claim a lock from the Locket API."
  default: locket.service.cf.internal:8891
  +  diego.auctioneer.locket.client_keepalive_time:
  +    description: "Period in seconds after which the locket gRPC client sends keepalive ping requests to the locket server it is connected to."
  +    default: 10
  +  diego.auctioneer.locket.client_keepalive_timeout:
  +    description: "Timeout in seconds to receive a response to the keepalive ping. If a response is not received within this time, the locket client will reconnect to another server."
  +    default: 22
  locks.locket.enabled:
  description: When set, the auctioneer attempts to claim a lock from the Locket API.
  diff --git a/jobs/bbs/spec b/jobs/bbs/spec
  index b6f1040c2..9204a8d4c 100644
  --- a/jobs/bbs/spec
  +++ b/jobs/bbs/spec
  @@ -140,6 +140,12 @@ properties:
  diego.bbs.locket.api_location:
  description: "Hostname and port of the Locket server. When set, the BBS attempts to claim a lock from the Locket API and will detect Diego cells registered with the Locket API."
  default: locket.service.cf.internal:8891
  +  diego.bbs.locket.client_keepalive_time:
  +    description: "Period in seconds after which the locket gRPC client sends keepalive ping requests to the locket server it is connected to."
  +    default: 10
  +  diego.bbs.locket.client_keepalive_timeout:
  +    description: "Timeout in seconds to receive a response to the keepalive ping. If a response is not received within this time, the locket client will reconnect to another server."
  +    default: 22
  limits.open_files:
  description: Maximum number of files (including sockets) the BBS process may have open.
  diff --git a/jobs/rep/spec b/jobs/rep/spec
  index df7bd7c49..1383b67c0 100644
  --- a/jobs/rep/spec
  +++ b/jobs/rep/spec
  @@ -217,6 +217,12 @@ properties:
  diego.rep.locket.api_location:
  description: "Hostname and port of the Locket server. When set, the cell rep will establish its cell registration in the Locket API."
  default: locket.service.cf.internal:8891
  +  diego.rep.locket.client_keepalive_time:
  +    description: "Period in seconds after which the locket gRPC client sends keepalive ping requests to the locket server it is connected to."
  +    default: 10
  +  diego.rep.locket.client_keepalive_timeout:
  +    description: "Timeout in seconds to receive a response to the keepalive ping. If a response is not received within this time, the locket client will reconnect to another server."
  +    default: 22
  enable_declarative_healthcheck:
  description: "When set, enables the rep to prefer the LRP CheckDefinition to healthcheck instances over the Monitor action. Requires Garden-Runc v1.10.0+"
  diff --git a/jobs/rep_windows/spec b/jobs/rep_windows/spec
  index 4fc4504bf..023d76f18 100644
  --- a/jobs/rep_windows/spec
  +++ b/jobs/rep_windows/spec
  @@ -227,7 +227,13 @@ properties:
  diego.rep.locket.api_location:
  description: "Hostname and port of the locket server"
  default: locket.service.cf.internal:8891
  -
  +  diego.rep.locket.client_keepalive_time:
  +    description: "Period in seconds after which the locket gRPC client sends keepalive ping requests to the locket server it is connected to."
  +    default: 10
  +  diego.rep.locket.client_keepalive_timeout:
  +    description: "Timeout in seconds to receive a response to the keepalive ping. If a response is not received within this time, the locket client will reconnect to another server."
  +    default: 22
  +
  enable_declarative_healthcheck:
  description: "When set, enables the rep to prefer the LRP CheckDefinition to healthcheck instances over the Monitor action."
  default: false
  diff --git a/jobs/vizzini/spec b/jobs/vizzini/spec
  index fa6c8d0d0..40b5eb74b 100644
  --- a/jobs/vizzini/spec
  +++ b/jobs/vizzini/spec
  @@ -47,9 +47,6 @@ properties:
  vizzini.verbose:
  description: Run tests in verbose mode
  default: false
  -  vizzini.stream:
  -    description: Stream output from parallel test nodes. This option will lead to less coherent output but is useful when debugging
  -    default: false
  enable_declarative_healthcheck:
  description: "When set, enables the declarative check tests in vizzini"
  ```
  ## ✨  Built with go 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/diego-release/compare/v2.75.0...v2.76.0
  ## Resources
  - [Download release v2.76.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/diego-release?version=2.76.0).
          </pre>
        </details>
        <details>
          <summary>v2.75.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  * Bump ginkgo to v2 and lager to v3
  * [Bug fix] Rep does not clean up resources when deleting container fails
  ## ✨  Built with go 1.20.3
  **Full Changelog**: https://github.com/cloudfoundry/diego-release/compare/v2.73.0...v2.75.0
  ## Resources
  - [Download release v2.75.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/diego-release?version=2.75.0).
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>envoy-nginx</td><td>0.15.0</td><td></td></tr>
    <tr><td>garden-runc</td><td>1.29.0</td>
      <td>
        <details>
          <summary>v1.29.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  ⚠️We have removed the garden-healthcheck job from garden while we investigate a way to make it less painful. From v1.22.6 through v1.28.0, garden restarts with a high container count could result in BOSH deploys failing due to a race condition between garden, bpm, monit, and garden-healthchecker. This will be re-enabled at a later time when we resolve the race condition.
  ## ✨  Built with go 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/garden-runc-release/compare/v1.28.0...v1.29.0
  ## Resources
  - [Download release v1.29.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/garden-runc-release?version=1.29.0).
          </pre>
        </details>
        <details>
          <summary>v1.28.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  - Bump to golang 1.20.4
  - Bump dependencies
  ## ✨  Built with go 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/garden-runc-release/compare/v1.27.0...v1.28.0
  ## Resources
  - [Download release v1.28.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/garden-runc-release?version=1.28.0).
          </pre>
        </details>
        <details>
          <summary>v1.27.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  * Bump ginkgo to v2 and lager to v3
  ## ✨  Built with go 1.20.3
  **Full Changelog**: https://github.com/cloudfoundry/garden-runc-release/compare/v1.26.0...v1.27.0
  ## Resources
  - [Download release v1.27.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/garden-runc-release?version=1.27.0).
          </pre>
        </details>
        <details>
          <summary>v1.26.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  - Bump runc version to 1.1.4
  - Bump containerd version to 1.6.19
  - Fix cloudfoundry/garden-runc-release#233
  ## ✨  Built with go 1.20.1
  **Full Changelog**: https://github.com/cloudfoundry/garden-runc-release/compare/v1.25.0...v1.26.0
  ## Resources
  - [Download release v1.26.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/garden-runc-release?version=1.26.0).
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>hwc-offline-buildpack</td><td>3.1.30</td>
      <td>
        <details>
          <summary>3.1.30</summary>
          <pre style="max-width: 30em">
  * Update libbuildpack
  * Bump github.com/onsi/gomega from 1.27.4 to 1.27.6
  * Bump github.com/onsi/gomega from 1.26.0 to 1.27.4
  Packaged binaries:
  | name | version | cf_stacks |
  |-|-|-|
  | hwc | 23.0.0 | windows, windows2016 |
  Default binary versions:
  | name | version |
  |-|-|
  | hwc | 23.0.0 |
  * Uncached buildpack SHA256: 6f4ed709322d792dfe1ac4d28dd1d488e7db2807ef372bff1bfe1cfe23672373
  * Uncached buildpack SHA256: 470d6da338b0bdd646ddda4e7da5f5394eb535cef5923df6da4ec8e306652819
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>loggregator-agent</td><td>7.2.1</td>
      <td>
        <details>
          <summary>v7.2.1</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Bump to [go1.20.4](https://groups.google.com/g/golang-announce/c/MEb0UyuSMsU/m/QvrjqM4XAgAJ)
  * Bump dependencies
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.2.0...v7.2.1
          </pre>
        </details>
        <details>
          <summary>v7.2.0</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Bump golang.org/x/net from 0.8.0 to 0.9.0 in /src by @dependabot in https://github.com/cloudfoundry/loggregator-agent-release/pull/283
  * Add mtls options to aggregate drains.  by @Benjamintf1 in https://github.com/cloudfoundry/loggregator-agent-release/pull/276
  * switch gorilla with chi by @Benjamintf1 in https://github.com/cloudfoundry/loggregator-agent-release/pull/285
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.1.3...v7.2.0
          </pre>
        </details>
        <details>
          <summary>v7.1.3</summary>
          <pre style="max-width: 30em">
  * Upgrade to go 1.20.2
  * Bump dependencies
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.1.2...v7.1.3
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>metrics-discovery</td><td>3.2.9</td>
      <td>
        <details>
          <summary>v3.2.9</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Bump to [go1.20.4](https://groups.google.com/g/golang-announce/c/MEb0UyuSMsU/m/QvrjqM4XAgAJ)
  * Bump dependencies
  **Full Changelog**: https://github.com/cloudfoundry/metrics-discovery-release/compare/v3.2.8...v3.2.9
          </pre>
        </details>
        <details>
          <summary>v3.2.8</summary>
          <pre style="max-width: 30em">
  * Upgrade to go1.20.2.
  * Bump dependencies.
  **Full Changelog**: https://github.com/cloudfoundry/metrics-discovery-release/compare/v3.2.7...v3.2.8
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>smoke-tests</td><td>4.8.2</td><td></td></tr>
    <tr><td>winc</td><td>2.11.1</td>
      <td>
        <details>
          <summary>v2.11.1</summary>
          <pre style="max-width: 30em">
  ## Changes
  - There were no changes in this release. It was created to test the release pipeline.
  ## ✨  Built with go 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/winc-release/compare/v2.11.0...v2.11.1
  ## Resources
  - [Download release v2.11.1 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry/winc-release?version=2.11.1).
          </pre>
        </details>
        <details>
          <summary>v2.11.0</summary>
          <pre style="max-width: 30em">
  ## Changes
  - Bump to go 1.20.4
  ## ✨  Built with go 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/winc-release/compare/v2.10.0...v2.11.0
  ## Resources
  - [Download release v2.11.0 from bosh.io](https://bosh.io/releases/github.com/cloudfoundry-incubator/winc-release?version=2.11.0).
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>windows-syslog</td><td>1.1.14</td>
      <td>
        <details>
          <summary>v1.1.14</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * update dependencies
  * update golang to 1.20.4
  **Full Changelog**: https://github.com/cloudfoundry/windows-syslog-release/compare/v1.1.13...v1.1.14
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>windows-utilities</td><td>0.17.0</td><td></td></tr>
  </tbody>
</table>



### <a id='4.0.0'></a> 4.0.0+LTS-T

**Release Date:** 04/18/2023

* **[Feature]** Integrated Windows Authentication
* **[Breaking Change]** Remove deprecated global log rate limit
* Bump garden-runc to version `1.25.0`
* Bump loggregator-agent to version `7.1.2`
* Bump metrics-discovery to version `3.2.7`
* Bump windowsfs-release to version `2.51.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
      <th>Release Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>windows2019 stemcell</td><td>2019.60</td><td></td></tr>
    <tr><td>diego</td><td>2.73.0</td><td></td></tr>
    <tr><td>envoy-nginx</td><td>0.15.0</td><td></td></tr>
    <tr><td>garden-runc</td><td>1.25.0</td><td></td></tr>
    <tr><td>hwc-offline-buildpack</td><td>3.1.29</td><td></td></tr>
    <tr><td>loggregator-agent</td><td>7.1.2</td>
      <td>
        <details>
          <summary>v7.1.2</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * update to golang 1.20.1
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.1.1...v7.1.2
          </pre>
        </details>
        <details>
          <summary>v7.1.1</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * update dependencies
  * Add error messages for better traceability of filtered out syslog drain bindings by @chombium in https://github.com/cloudfoundry/loggregator-agent-release/pull/216
  * Upgrade to go 1.20 by @rroberts2222 in https://github.com/cloudfoundry/loggregator-agent-release/pull/223
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.1.0...v7.1.1
          </pre>
        </details>
        <details>
          <summary>v7.1.0</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Add app-id and drain url in the error message by @chombium in https://github.com/cloudfoundry/loggregator-agent-release/pull/212
  ## New Contributors
  * @chombium made their first contribution in https://github.com/cloudfoundry/loggregator-agent-release/pull/212
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.0.2...v7.1.0
          </pre>
        </details>
        <details>
          <summary>v7.0.2</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Sanitize ProcID in syslog messages so messages with utf-8 in the source_type are not dropped by @Benjamintf1 in https://github.com/cloudfoundry/loggregator-agent-release/pull/200
  * Update dependencies
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.0.1...v7.0.2
          </pre>
        </details>
        <details>
          <summary>v7.0.1</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Fix: anonymize URL in syslog drain logs and metrics by @ctlong in https://github.com/cloudfoundry/loggregator-agent-release/pull/186
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v7.0.0...v7.0.1
          </pre>
        </details>
        <details>
          <summary>v7.0.0</summary>
          <pre style="max-width: 30em">
  ## What's Changed
  * Allow application developers to set client certs and keys, as well as server cas, to be used for authentication in syslog-tls drains by @fhambrec, @dark5un in https://github.com/cloudfoundry/loggregator-agent-release/pull/177 / https://github.com/cloudfoundry/loggregator-agent-release/pull/119. Breaking change: requires new version of capi
  * Add drain scope and url tags to syslog egress metrics by @skaur20 in https://github.com/cloudfoundry/loggregator-agent-release/pull/123, Breaking change: might effect metrics dashboards and calculations.
  ## New Contributors
  * @skaur20 made their first contribution in https://github.com/cloudfoundry/loggregator-agent-release/pull/123
  **Full Changelog**: https://github.com/cloudfoundry/loggregator-agent-release/compare/v6.5.6...v7.0.0
          </pre>
        </details>
      </td>
    </tr>
    <tr><td>metrics-discovery</td><td>3.2.7</td><td></td></tr>
    <tr><td>smoke-tests</td><td>4.8.2</td><td></td></tr>
    <tr><td>winc</td><td>2.10.0</td><td></td></tr>
    <tr><td>windows-syslog</td><td>1.1.13</td><td></td></tr>
    <tr><td>windows-utilities</td><td>0.17.0</td><td></td></tr>
    <tr><td>windowsfs-release</td><td>2.46.0</td><td></td></tr>
  </tbody>
</table>

## <a id='upgrade'></a> How to Upgrade

The <%= vars.windows_runtime_abbr %> <%= vars.v_major_version %> tile is available with the release of <%= vars.app_runtime_full %>
(<%= vars.app_runtime_abbr %>) <%= vars.v_major_version %>. To use the <%= vars.windows_runtime_abbr %> <%= vars.v_major_version %> tile, you must install
<%= vars.ops_manager_full %> v2.10 or later and <%= vars.app_runtime_abbr %> <%= vars.v_major_version %> or later.


## <a id='new-features'></a> New Features in <%= vars.windows_runtime_abbr %> <%= vars.v_major_version %>

<%= vars.windows_runtime_abbr %> <%= vars.v_major_version %> includes the following major feature:

### Integrated Windows Authentication

You can now log in to your .NET Framework applications using your existing Active Directory Domain. For setup details, see [Windows Authentication for .Net apps](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/4.0/tas-for-vms/windows-authentication.html)

## <a id='breaking-changes'></a> Breaking Changes

<%= vars.windows_runtime_abbr %> <%= vars.v_major_version %> includes the following breaking change:

### Option to Enable (Deprecated) Global Log Rate Limit is Removed

This feature was in beta until IST v3.0, when it was deprecated. For details, see [VMware Tanzu Application Service for Windows v3.0 Release Notes](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/3.0/tas-for-vms/release-notes.html#global-log-rate-limit-is-deprecated-14)
following the introduction of app log rate limits. For more information, see [App Log Rate Feature](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/3.0/tas-for-vms/runtime-rn.html#app-log-rate-limits-for-orgs-spaces-and-individual-apps-14).
This option to enable the feature has now been removed, and you must apply app log rate limits instead.

Note that if you were using this feature to limit your overall app log
throughput, then you might see an increase in log load after you upgrade.

To
mitigate this, either:

* Scale up your logging system before you upgrade to TASW v4.0 to compensate for the increased log load.
* Upgrade to TAS/TASW v3.0 first to set app-level log rate limits while retaining the global log rate limit. For more details, see [App Log Rate Limits](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/4.0/tas-for-vms/app-log-rate-limits.html).

## <a id='known-issues'></a> Known Issues

There are no known issues for <%= vars.windows_runtime_abbr %> <%= vars.v_major_version %>.
